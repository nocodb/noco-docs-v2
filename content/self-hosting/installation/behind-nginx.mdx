---
title: 'Behind Nginx'
description: 'Run NocoDB Behind Nginx.'
tags: ['nginx', 'proxy']
keywords : ['NocoDB Nginx', 'NocoDB Proxy']
---

# Installing NocoDB behind Nginx

## Prerequisites
We assume you already have a Nginx server running.

## Step 1 - Run NocoDB

### Using Docker

```bash
docker run \
	-d \
	--name nocodb \
	--tmpfs /run:nodev,nosuid,exec,mode=0755 \
	-v "$(pwd)"/aio:/var \
	-e NC_AUTH_JWT_SECRET="your-super-secret-passs" \
    -e NC_PUBLIC_URL="__your_nocodb_domain__.com"
	-p 9000:9000 \
	-p 8080:8080 \
	--restart unless-stopped \
	-it nocodb/nocodb_aio:latest
```

### Using Docker compose

Create docker-compose.yml
```yaml
version: "3.9"
services:
  nocodb:
    container_name: nocodb
    image: nocodb/nocodb_aio:latest
    environment:
      NC_AUTH_JWT_SECRET: 'your-super-secret-passs'
      NC_PUBLIC_URL: '__your_nocodb_domain__.com'
    ports:
      - "8080:8080"
      - "9000:9000"
    volumes:
      - nocodb_data:/var
	tmpfs:
      - /run:nodev,nosuid,exec,mode=0755
volumes:
  nocodb_data:
```

Then start nocodb
```bash
docker-compose up -d

```
## Step 2 - Create the nginx config

Create a new `nocodb.conf` in `/etc/nginx/sites-enabled/` with the following contents:

> Make sure to replace any __nocodb_domain__ with you own domain

### Without ssl

```
server {
      listen 0.0.0.0:80 ;
      listen [::0]:80 ;
      server_name __nocodb_domain__ ;
      http2 on;
      proxy_buffering off;
      proxy_request_buffering off;

      location /aiominionocodb {
              proxy_pass http://127.0.0.1:9000;

              # recommended proxy headers
              proxy_set_header        Host $host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $host;
      }

      location / {
              proxy_pass http://127.0.0.1:8080;

              # recommended proxy headers
              proxy_set_header        Host $host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $host;
      }
}
```

### With ssl

You can aquire a free ssl certificate using [lego](https://go-acme.github.io/lego/usage/cli/obtain-a-certificate/index.html)

```
server {
      listen 0.0.0.0:80 ;
      listen [::0]:80 ;
      server_name __nocodb_domain__ ;

      location / {
              return 301 https://$host$request_uri;
      }

      location ^~ /.well-known/acme-challenge/ {
              root /var/lib/acme/_acme-challenge;
              auth_basic off;
              auth_request off;
      }
}

server {
      listen 0.0.0.0:443 ssl ;
      listen [::0]:443 ssl ;
      server_name __nocodb_domain__ ;
      http2 on;
      proxy_buffering off;
      proxy_request_buffering off;

      ssl_certificate /var/lib/acme/__nocodb_domain__/fullchain.pem;
      ssl_certificate_key /var/lib/acme/__nocodb_domain__/key.pem;
      ssl_trusted_certificate /var/lib/acme/__nocodb_domain__/chain.pem;

      location ^~ /.well-known/acme-challenge/ {
              root /var/lib/acme/_acme-challenge;
              auth_basic off;
              auth_request off;
      }

      location /aiominionocodb {
              proxy_pass http://127.0.0.1:9000;

              # recommended proxy headers
              proxy_set_header        Host $host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $host;
      }

      location / {
              proxy_pass http://127.0.0.1:8080;

              # recommended proxy headers
              proxy_set_header        Host $host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $host;
      }
}
```

## Step 3 - Enable the nginx site

```bash
sudo ln -s /etc/nginx/sites-available/nocodb.conf /etc/nginx/sites-enabled/nocodb.conf
sudo systemctl reload nginx
```

You should now be able to access NocoDB on you configured domain.
